(this["webpackJsonpreact-countries"]=this["webpackJsonpreact-countries"]||[]).push([[0],{35:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(16),c=n.n(r),o=(n(45),n(46),n(47),n(48),n(49),n(13)),i=n(1),l=function(e){return Object(i.jsx)("aside",{className:"Menu",children:Object(i.jsx)("nav",{children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsxs)("span",{children:["Menu ",Object(i.jsx)("i",{className:"fa fa-angle-down"})]})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/teste-react-countries",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/teste-react-countries/dashboard",children:"Lista de pa\xedses"})})]})})})},d=(n(55),n(3)),u=function(e){return Object(i.jsx)("header",{className:"page-header",children:Object(i.jsxs)("h1",{children:[e.title," ",Object(i.jsx)("small",{style:{fontSize:"50%"},children:e.subtitle})]})})},j=n(23),h=n(24),m=n(12),p=n(27),b=n(26),O=(n(56),n(14)),f=n(9),x="http://localhost:8080/",g=function(){var e='( name: "'.concat(sessionStorage.getItem("nome_pais"),'" )');return function(t){fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n                    query {\n                        Country".concat(e," {\n                            _id\n                            name\n                            capital\n                            area\n                            flag {\n                              country {\n                                population\n                                flag {\n                                  svgFile\n                                }\n                                topLevelDomains {\n                                  name\n                                }\n                              }\n                            }\n                            location {\n                              latitude\n                              longitude\n                            }\n                            borders {\n                              name\n                              location {\n                                latitude\n                                longitude\n                              }\n                            }\n                            distanceToOtherCountries(first: 5) {\n                              distanceInKm\n                              countryName\n                            }                            \n                        }\n                    }\n                ")})}).then((function(e){return e.json()})).then((function(e){return t({type:"ONE_SEARCHED",payload:e.data.Country})}))}},y=function(){return function(e){fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n                    query {\n                        Country {\n                            _id\n                            name\n                            capital\n                            area\n                            flag {\n                              country {\n                                population\n                                flag {\n                                  svgFile\n                                }\n                                topLevelDomains {\n                                  name\n                                }\n                              }\n                            }\n                            location {\n                              latitude\n                              longitude\n                            }\n                            borders {\n                              name\n                              location {\n                                latitude\n                                longitude\n                              }\n                            }\n                            distanceToOtherCountries(first: 5) {\n                              distanceInKm\n                              countryName\n                            }  \n                        }\n                    }\n                "})}).then((function(e){return e.json()})).then((function(t){return e({type:"SEARCHED",payload:t.data.Country})}))}},v=function(e){return{type:"CLICKED",payload:e}},_=(n(35),Object(O.b)((function(e){return{countryName:e.country.countryName}}),(function(e){return Object(f.b)({getCountry:v},e)}))((function(e){return Object(i.jsx)("div",{className:"Card",onClick:function(){return function(t){e.getCountry(t);var n="name_"+t;sessionStorage.setItem(n,t),sessionStorage.setItem("dados_country_"+n,JSON.stringify(e)),sessionStorage.setItem("nome_pais",t)}(e.name)},"data-testid":"card_de_paises",children:Object(i.jsxs)(o.b,{to:e.url,children:[Object(i.jsx)("img",{src:e.src,alt:e.name}),Object(i.jsxs)("div",{className:"name-country",children:[Object(i.jsxs)("span",{children:[Object(i.jsx)("strong",{children:"Nome do Pa\xeds:"})," ",e.name]}),Object(i.jsxs)("span",{children:[Object(i.jsx)("strong",{children:"Capital:"})," ",e.capital]})]})]})})}))),C=n(38),N=n.n(C),S=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={searchTerm:""},a.searchUpdated=a.searchUpdated.bind(Object(m.a)(a)),a.keyHandler=a.keyHandler.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.searchAll(),console.log("Inicializando...")}},{key:"keyHandler",value:function(e){"Escape"===e.key&&this.setState({searchTerm:""})}},{key:"searchUpdated",value:function(e){this.setState({searchTerm:e})}},{key:"render",value:function(){var e=this,t=this.props.query.filter((function(t){return t.name.toLowerCase().includes(e.state.searchTerm.toLowerCase())})),n=[];return this.props.query.map((function(e){return n.push({name:e.name,coordinate:e.location})})),sessionStorage.setItem("location_countries",JSON.stringify(n)),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"col-xs-12",children:Object(i.jsx)("div",{role:"form",className:"search-form form-group",children:Object(i.jsx)("input",{"data-testid":"form_search",className:"form-control input-form",type:"text",placeholder:"Buscar Pa\xeds",value:this.state.searchTerm,onKeyUp:this.keyHandler,onChange:function(t){return e.searchUpdated(t.target.value)}})})}),Object(i.jsxs)("div",{className:"Cards",children:[!0===this.props.load?Object(i.jsxs)("div",{className:"loading",children:[Object(i.jsx)("i",{className:"fa fa-refresh fa-spin fa-3x fa-fw"})," Carregando pa\xedses..."]}):"",t.map((function(e){return Object(i.jsx)(s.a.Fragment,{children:Object(i.jsx)(_,{src:e.flag.country.flag.svgFile,name:e.name,capital:e.capital,area:e.area,populacao:e.flag.country.population,dominio:e.flag.country.topLevelDomains||[],latitude:e.location.latitude,longitude:e.location.longitude,bordersCountry:e.borders,distanceCountries:e.distanceToOtherCountries,url:"/teste-react-countries/details/"+N()(e.name.replaceAll(" ","-").replaceAll(/[&\\#,+()$~%.'":*?<>{}]/g,""))},e._id)},e._id)}))]})]})}}]),n}(a.Component),I=Object(O.b)((function(e){return{load:e.country.load,query:e.country.query}}),(function(e){return Object(f.b)({searchAll:y},e)}))(S),E=n(25),D=(n(58),n(62)),k=n(67),T=n(63),q=n(64),w=n(65),L=n(66),A=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).formEditCountry=a.formEditCountry.bind(Object(m.a)(a)),a.alterarDados=a.alterarDados.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.state={name:"",capital:"",area:"",populacao:"",dominio:[{name:""}]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.search(sessionStorage.getItem("nome_pais")),console.log("Inicializando detalhes...")}},{key:"handleInputChange",value:function(e){var t=e.target,n="text"===t.type?t.value:t.checked,a=t.name;this.setState(Object(E.a)({},a,"dominio"===a?[{name:n}]:n))}},{key:"alterarDados",value:function(e){""===(this.state.capital&&this.state.populacao&&this.state.area&&this.state.dominio)?alert("Preencha todos os campos"):(sessionStorage.setItem("dados_country_name_alterado_"+e,JSON.stringify(this.state)),alert("altera\xe7\xf5es feitas!"))}},{key:"formEditCountry",value:function(){var e=this,t=sessionStorage.getItem("nome_pais"),n=null===sessionStorage.getItem("dados_country_name_alterado_"+t)?sessionStorage.getItem("dados_country_name_"+t):sessionStorage.getItem("dados_country_name_alterado_"+t);return n=JSON.parse(n),Object(i.jsxs)("div",{id:"details",children:[Object(i.jsxs)("div",{className:"detail-country",children:[Object(i.jsx)("img",{src:JSON.parse(sessionStorage.getItem("dados_country_name_"+sessionStorage.getItem("nome_pais"))).src,alt:n.name}),Object(i.jsxs)("div",{className:"description",children:[Object(i.jsx)("h2",{children:n.name}),Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:"Capital:"})," ",""===this.state.capital?n.capital:this.state.capital]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:"Popula\xe7\xe3o:"})," ",""===this.state.populacao?n.populacao:this.state.populacao]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:"\xc1rea:"})," ",""===this.state.area?n.area:this.state.area]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:"Dom\xednio de primeiro n\xedvel com c\xf3digo de pa\xeds:"})," ",""===this.state.dominio[0].name?n.dominio[0].name:this.state.dominio[0].name]})]})]}),Object(i.jsx)("div",{className:"alterar-form",children:Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("div",{className:"info",children:[Object(i.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Alterar informa\xe7\xf5es do pa\xeds (campos obrigat\xf3rios*)"]}),Object(i.jsxs)("div",{className:"inputs",children:[Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Capital*",name:"capital",value:this.state.capital,onChange:this.handleInputChange}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Popula\xe7\xe3o*",name:"populacao",value:this.state.populacao,onChange:this.handleInputChange}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"\xc1rea*",name:"area",value:this.state.area,onChange:this.handleInputChange}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Dom\xednio de primeiro n\xedvel*",name:"dominio",value:this.state.dominio[0].name,onChange:this.handleInputChange})]}),Object(i.jsx)("button",{className:"btn btn-primary btn-alterar",onClick:function(){return e.alterarDados(t)},children:"Alterar dados"})]})})]})}},{key:"render",value:function(){if(null!==sessionStorage.getItem("nome_pais")){var e=sessionStorage.getItem("nome_pais"),t=sessionStorage.getItem("dados_country_name_"+e);t=JSON.parse(t);var n=JSON.parse(sessionStorage.getItem("location_countries"))||[],a=t.distanceCountries.map((function(e){return n.filter((function(t){return t.name===e.countryName}))}));return Object(i.jsxs)(i.Fragment,{children:[this.formEditCountry(),Object(i.jsxs)("h2",{className:"title-map",children:["Localiza\xe7\xe3o pr\xf3xima de 5 pa\xedses - ",e]}),Object(i.jsxs)(D.a,{center:[t.latitude,t.longitude],zoom:5,scrollWheelZoom:!1,children:[Object(i.jsx)(k.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(i.jsx)(T.a,{position:[t.latitude,t.longitude],children:Object(i.jsx)(q.a,{children:Object(i.jsxs)("h5",{children:[Object(i.jsx)("img",{src:t.src,width:"50",alt:e})," ",e]})})}),a.map((function(n,a){var s=[t.latitude,t.longitude],r=[];return r.push([n[0].coordinate.latitude,n[0].coordinate.longitude]),r.push(s),Object(i.jsxs)("div",{children:[Object(i.jsx)(T.a,{position:[n[0].coordinate.latitude,n[0].coordinate.longitude],children:Object(i.jsxs)(q.a,{children:[Object(i.jsx)("h6",{children:n[0].name}),Object(i.jsx)("div",{style:{fontSize:"14px",fontWeight:"600"},children:t.distanceCountries[a].countryName===n[0].name?Math.round(t.distanceCountries[a].distanceInKm)+" Km at\xe9 "+e:""})]})},n[0].name),Object(i.jsx)(w.a,{pathOptions:{color:"red"},positions:r,children:Object(i.jsxs)(L.a,{sticky:!0,children:["Dist\xe2ncia at\xe9 ",e]})})]},a)}))]})]})}return window.location.href="/teste-react-countries/dashboard"}}]),n}(a.Component),H=Object(O.b)((function(e){return{countryName:e.country.countryName,querySelected:e.country.querySelected}}),(function(e){return Object(f.b)({search:g},e)}))(A),J=(n(59),function(e){return Object(i.jsxs)("div",{className:"homepage",children:[Object(i.jsxs)("p",{children:["Ol\xe1, neste site mostraremos algumas informa\xe7\xf5es sobre os ",Object(i.jsx)("b",{children:"pa\xedses"})," do mundo."]}),Object(i.jsxs)("p",{children:["Acesse o ",Object(i.jsx)("b",{children:"menu"})," ao lado para buscar informa\xe7\xf5es b\xe1sicas dos pa\xedses."]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Reposit\xf3rio no GitHub para mais informa\xe7\xf5es do c\xf3digo: "}),Object(i.jsx)("a",{rel:"noreferrer",href:"https://github.com/vx-charles/teste-react-countries/",target:"_blank",children:"https://github.com/vx-charles/teste-react-countries/"})]})]})}),P=function(e){return Object(i.jsx)("main",{className:"Content",children:Object(i.jsxs)(d.c,{children:[Object(i.jsxs)(d.a,{exact:!0,path:"/teste-react-countries",children:[Object(i.jsx)(u,{title:"Homepage - Lista de Pa\xedses do Mundo"}),Object(i.jsx)(J,{})]}),Object(i.jsxs)(d.a,{path:"/teste-react-countries/dashboard",children:[Object(i.jsx)(u,{title:"Dashboard",subtitle:"Lista de pa\xedses"}),Object(i.jsx)(I,{})]}),Object(i.jsxs)(d.a,{path:"/teste-react-countries/details",children:[Object(i.jsx)(u,{title:"Detalhes do Pa\xeds"}),Object(i.jsx)(H,{})]}),Object(i.jsxs)(d.a,{path:"*",children:[Object(i.jsx)("div",{children:Object(i.jsx)("strong",{style:{fontSize:"24px"},children:"ERRO 404"})}),Object(i.jsx)("div",{children:"P\xe1gina n\xe3o encontrada!!!"})]})]})})};var R=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(o.a,{children:[Object(i.jsx)(l,{}),Object(i.jsx)(P,{})]})})},z=n(39),M=n(4),K={load:!0,countryName:"",textInput:"",query:[],querySelected:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCHED":return Object(M.a)(Object(M.a)({},e),{},{load:!1,query:t.payload});case"ONE_SEARCHED":return Object(M.a)(Object(M.a)({},e),{},{querySelected:t.payload});case"CLICKED":return Object(M.a)(Object(M.a)({},e),{},{countryName:t.payload});default:return e}},F=n(40),X=n.n(F),B=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),V=Object(f.c)({country:U}),W=Object(f.a)(z.a,X.a)(f.d)(V,B);var G=function(){return W}();c.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(O.a,{store:G,children:Object(i.jsx)(R,{})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.1f2d2d34.chunk.js.map